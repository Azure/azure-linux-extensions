version:
  name: 'Azure Disk Encryption for Linux Test2'
  major: 1                                                              
  minor: 1                                                              
  tag: 'buddy'
  system: 'buildrevision'
environment:
  host:
    os: 'linux'
    flavor: 'ubuntu'                                                    
    version: '18.04'                                                    
  runtime:
    provider: 'appcontainer'
    image: 'cdpxlinuxtest.azurecr.io/global/ubuntu-1804-all:1.0'
    source_mode: 'link'             

restore:
  commands:
    - !!defaultcommand
      name: 'Install packages'
      command: 'VMEncryption/cdpx_restore.sh'
build:
  commands:
    - !!buildcommand
      name: 'Build ADE Package'
      command: 'VMEncryption/cdpx_build.sh'
      arguments: 'AzureDiskEncryptionForLinuxTest2'

      fail_on_stderr: true
      artifacts:
        - from: 'VMEncryption'
          include:
            - 'dist/*.zip'
